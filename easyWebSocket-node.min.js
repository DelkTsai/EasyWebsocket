EasyWebSocket=function(a){var b=this;this.url=a;this.bufferedAmount=0;this.readyState=EasyWebSocket.CONNECTING;this._clientId="clientid-sio-"+this.url+"-"+Math.floor(Math.random()*999999).toString(36);this.log=EasyWebSocket.logFunction;["onopen","onmessage","onerror","onclode"].forEach(function(c){b[c]=function(){b.log("default "+c+" method")}});this._sioCtor()};
EasyWebSocket.prototype._sioCtor=function(){this._sockio=new io.Socket(null,{port:8667,rememberTransport:false});this._sockio.connect();this._sockio.on("connect",function(){console.log("socket connected",this._sockio,this._clientId);this._sockio.send({type:"connect",data:{wsUrl:this.url,clientId:this._clientId}});this.readyState=EasyWebSocket.CONNECTED;this.onopen()}.bind(this));this._sockio.on("connect_failed",function(){this.onerror()}.bind(this));this._sockio.on("message",function(a){console.log("received message",
a);this.onmessage({data:a})}.bind(this));this._sockio.on("disconnect",function(){console.log("socket disconnected");this.onclose()}.bind(this))};EasyWebSocket.prototype.send=function(a){this._sockio.send({type:"message",data:{clientId:this._clientId,message:a}})};EasyWebSocket.prototype.close=function(){this._sockio.disconnect()};EasyWebSocket.CONNECTING=0;EasyWebSocket.OPEN=1;EasyWebSocket.CLOSING=2;EasyWebSocket.CLOSED=3;EasyWebSocket.iframeOrigin="http://easywebsocket.appspot.com";
EasyWebSocket.logFunction=function(){};
